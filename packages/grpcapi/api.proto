syntax = "proto3";

package grpcapi;

option go_package = "github.com/Krunis/summary-aggregation/packages/grpcapi;grpcapi";

import "google/protobuf/timestamp.proto";

//
service AggregatorService {
    //
    rpc GetUserSummary(UserSummaryRequest) returns (UserSummaryResponse);
    //
    rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse);
}

message DBSummary{
    string id = 1;
    string light_type = 2;
}

message ServiceSummary {
    google.protobuf.Timestamp time = 1;
    string color = 2;
}

message UserSummaryRequest {
    string username = 1;
    string user_summary_name = 2;
}

message UserSummaryResponse {
    string user_summary_name = 1;
    DBSummary db_summary = 2;
    ServiceSummary service_summmary = 3;

}

message HealthCheckRequest{
    string username = 1;
}

message HealthCheckResponse{
    string health_db = 1;
    string health_other_service = 2;
}